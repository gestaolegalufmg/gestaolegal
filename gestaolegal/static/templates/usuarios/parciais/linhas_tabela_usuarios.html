{% for usuario in usuarios.items %}
<tr>
  <td>{{usuario.nome}}</td>
  <td>{{usuario.email}}</td>
  <td>{{UserRole.get_display_name(usuario.urole)}}</td>
  <td>
    {% if usuario.status %}
      <span class="status-badge active">Ativo</span>
    {% else %}
      <span class="status-badge inactive">Inativo</span>
    {% endif %}
  </td>
  <td>
    <div class="action-buttons" role="group" aria-label="Ações para o usuário {{usuario.nome}}">
      <a href="{{url_for('usuario.perfil_usuario', id_user = usuario.id)}}" 
         class="btn btn-primary" 
         title="Visualizar usuário"
         aria-label="Visualizar perfil do usuário {{usuario.nome}}">
        <i class="icon icon-eye" aria-hidden="true"></i>
        <span class="sr-only">Visualizar</span>
      </a>
      {% if current_user.urole in [UserRole.ADMINISTRADOR.value, UserRole.PROFESSOR.value] and (usuario.id != admin_padrao or current_user.id == admin_padrao)%}
      <a href="{{url_for('usuario.editar_usuario', id_user = usuario.id)}}" 
         class="btn btn-primary" 
         title="Editar usuário"
         aria-label="Editar dados do usuário {{usuario.nome}}">
        <i class="icon icon-edit" aria-hidden="true"></i>
        <span class="sr-only">Editar</span>
      </a>
      {% endif %}
      {% if current_user.urole == UserRole.ADMINISTRADOR.value and usuario.id != admin_padrao %}
      <form action="{{url_for('usuario.muda_senha_admin')}}" method="POST" class="inline-form">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <input type="hidden" name="id" value="{{usuario.id}}">
        <button type="submit" class="btn btn-warning" 
                title="Mudar senha"
                aria-label="Mudar senha do usuário {{usuario.nome}}"
                onclick="return confirm('Você deseja realmente trocar a senha deste usuário?');">
          <i class="icon icon-key" aria-hidden="true"></i>
          <span class="sr-only">Mudar senha</span>
        </button>
      </form>
      <form action="{{url_for('usuario.inativar_usuario_lista')}}" method="POST" class="inline-form">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <input type="hidden" name="id" value="{{usuario.id}}">
        <button type="submit" class="btn btn-danger" 
                title="Inativar usuário"
                aria-label="Inativar usuário {{usuario.nome}}"
                onclick="return confirm('Você deseja realmente inativar este usuário?');">
          <i class="icon icon-trash" aria-hidden="true"></i>
          <span class="sr-only">Inativar</span>
        </button>
      </form>
      {% endif %}
    </div>
  </td>
</tr>
{% endfor %}
